<!--

@license Apache-2.0

Copyright (c) 2020 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# N-API Add-on Arguments

> C API for validating, extracting, and transforming (to native C types) function arguments provided to a strided array N-API add-on interface.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```c
#include "stdlib/strided/base/napi/addon_arguments.h"
```

<!-- lint disable maximum-heading-length -->

#### stdlib_strided_base_napi_addon_arguments( const napi_env env, const napi_value argv, const int64_t nargs, const int64_t nin, uint8_t \*arrays[], int64_t \*shape, int64_t \*strides, enum STDLIB_NDARRAY_DTYPE \*types, napi_value \*err )

Validates, extracts, and transforms (to native C types) function arguments provided to a strided array N-API add-on interface.

```cpp
#include "stdlib/strided/base/napi/addon_arguments.h"
#include <node_api.h>
#include <stdint.h>
#include <assert.h>

// Add-on function...
napi_value addon( napi_env env, napi_callback_info info ) {
    napi_status status;

    // ...

    int64_t nargs = 7;
    int64_t nin = 2;

    // Get callback arguments:
    size_t argc = 7;
    napi_value argv[ 7 ];
    status = napi_get_cb_info( env, info, &argc, argv, nullptr, nullptr );
    assert( status == napi_ok );

    // ...

    // Process the provided arguments:
    enum STDLIB_NDARRAY_DTYPE types[ 3 ];
    uint8_t *arrays[ 3 ];
    int64_t strides[ 3 ];
    int64_t shape[ 1 ];

    napi_value err;
    status = stdlib_strided_base_napi_addon_arguments( env, argv, nargs, nin, arrays, shape, strides, types, &err );
    assert( status == napi_ok );

    // ...

}
```

The function accepts the following arguments:

-   `env`: environment under which the function is invoked.
-   `argv`: strided function arguments.
-   `nargs`: total number of expected arguments.
-   `nin`: number of input strided array arguments.
-   `arrays`: destination array containing pointers to both input and output strided byte arrays.
-   `shape`: destination array containing the array shape (dimensions).
-   `strides`: destination array containing array strides (in bytes) for each strided array.
-   `types`: destination array containing strided array argument data types.
-   `err`: pointer for storing a JavaScript error.

The function returns an `napi_status` status code indicating success or failure (returns `napi_ok` if success).

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

-   The function assumes the following argument order:

    ```text
    [ N, ia1, is1, ia2, is2, ..., oa1, os1, oa2, os2, ... ]
    ```

    where

    -   `N` is the number of elements over which to iterate
    -   `ia#` is an input strided array
    -   `is#` is a corresponding input strided array stride (in units of elements)
    -   `oa#` is an output strided array
    -   `os#` is a corresponding output strided array stride (in units of elements)

-   The function may return one of the following JavaScript errors:

    -   `TypeError`: stride argument must be a number
    -   `TypeError`: input array argument must be a typed array
    -   `TypeError`: output array argument must be a typed array
    -   `RangeError`: input array argument must have sufficient elements based on the associated stride and the number of indexed elements
    -   `RangeError`: output array argument must have sufficient elements based on the associated stride and the number of indexed elements

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

</section>

<!-- /.examples -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

</section>

<!-- /.links -->
