'use strict';

// MODULES //

var randu = require( '@stdlib/math/base/random/randu' );
var floor = require( '@stdlib/math/base/special/floor' );


// MAIN //

/**
* Randomly assign topics to words and keep track of the counts.
*
* @private
*/
function init() {
	/* eslint-disable no-invalid-this */
	var topic;
	var newz;
	var len;
	var wt;
	var d;
	var i;

	this.z = new Array( this.D );
	for ( d = 0; d < this.D; d++ ) {
		this.z[ d ] = [];
		len = this.w[ d ].length;
		// Initialize random topics...
		for ( i = 0; i < len; i++ ) {
			newz = floor( randu() * this.K );
			this.z[ d ].push( newz );
		}
		this.ndSum[ d ] = len;
		for ( i = 0; i < len; i++ ) {
			wt = this.w[ d ][ i ];
			topic = this.z[ d ][ i ];
			// Number of instances of word i assigned to topic j:
			this.nw.set( wt, topic, this.nw.get( wt, topic ) + 1 );
			// Number of words in document i assigned to topic j:
			this.nd.set( d, topic, this.nd.get( d, topic ) + 1 );
			// Total number of words assigned to topic j:
			this.nwSum[ topic ] = this.nwSum[ topic ] + 1;
		}
	}
} // end FUNCTION init()


// EXPORTS //

module.exports = init;
