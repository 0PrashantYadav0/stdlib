'use strict';

// MAIN //

var str;
var re;

str = '';

// Use a native function as a template:
str += Function.prototype.toString.call( Function );

// Escape special RegExp characters:
str = str.replace( /([.*+?^=!:$(){}|[\]\/\\])/g, '\\$1' ); // eslint-disable-line no-useless-escape

// Replace any mentions of `Function` to make template generic and replace `for ...` and additional info provided in other environments, such as Rhino.
str = str.replace( /Function|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?' );

// Bracket the regular expression:
str = '^' + str + '$';

// Create the regular expression:
re = new RegExp( str );


// EXPORTS //

module.exports = re;
