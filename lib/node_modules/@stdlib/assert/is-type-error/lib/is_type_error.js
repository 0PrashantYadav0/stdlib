'use strict';

// MODULES //

var getPrototypeOf = require( '@stdlib/utils/get-prototype-of' );
var typeOf = require( '@stdlib/utils/type-of' );
var isError = require( '@stdlib/assert/is-error' );


// MAIN //

/**
* Tests if a value is a `TypeError` object.
*
* @param {*} value - value to test
* @returns {boolean} boolean indicating whether a value is a `TypeError` object
*
* @example
* var bool = isTypeError( new TypeError( 'beep' ) );
* // returns true
*
* @example
* var bool = isTypeError( {} );
* // returns false
*/
function isTypeError( value ) {
	if ( typeof value !== 'object' || value === null ) {
		return false;
	}
	// Check for `TypeError` objects from the same realm (same Node.js `vm` or same `Window` object)...
	if ( value instanceof TypeError ) {
		return true;
	}
	// All `TypeError` objects are `Error` objects...
	if ( isError( value ) ) {
		// Walk the prototype tree until we find the desired constructor...
		while ( value ) {
			if ( typeOf( value ) === 'typeerror' ) {
				return true;
			}
			value = getPrototypeOf( value );
		}
	}
	return false;
} // end FUNCTION isTypeError()


// EXPORTS //

module.exports = isTypeError;
