# err2json

> Return a [JSON][json] representation of an [error][js-error] object.


<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

``` javascript
var err2json = require( '@stdlib/utils/error-to-json' );
```

#### err2json( error )

Returns a [JSON][json] representation of an [`error`][js-error] object.

``` javascript
var err = new Error( 'beep' );

var json = err2json( err );
/* returns
    {
        "type": "Error",
        "name": "Error", // if present
        "message": "beep",
        "stack": "..." // if present
    }
*/
```

The [JSON][json] `object` is __guaranteed__ to have the following properties:

* __type__: error type.
* __message__: error message.

The __only__ standardized cross-platform property is `message`. Depending on the platform, the following properties __may__ be present:

* __name__: error name.
* __stack__: stack trace.
* __code__: error code ([Node.js][node-system-error] system errors).
* __errno__: error code `string` ([Node.js][node-system-error] system errors).
* __syscall__: `string` representing the failed system call ([Node.js][node-system-error] system errors).

The function also serializes __all__ `enumerable` properties.

``` javascript
var err = new Error( 'beep' );
err.a = 'b';
err.c = { 'd': 'e' };

var json = err2json( err );
/* returns
    {
        "type": "Error",
        "name": "Error", // if present
        "message": "beep",
        "stack": "...", // if present
        "a": "b",
        "c": {
            "d": "e"
        }
    }
*/
```

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

* Supported built-in [`error`][js-error] types:

  - [`Error`][js-error] 
  - [`TypeError`][js-type-error]
  - [`SyntaxError`][js-syntax-error]
  - [`ReferenceError`][js-reference-error]
  - [`RangeError`][js-range-error]
  - [`URIError`][js-uri-error]
  - [`EvalError`][js-eval-error]

* The implementation supports custom error types and sets the `type` field to the closest built-in [`error`][js-error] type.

  ``` javascript
  function CustomError( msg ) {
      this.name = 'CustomError';
      this.message = msg || '';
      this.stack = ( new TypeError() ).stack;
      return this;
  }
  CustomError.prototype = Object.create( TypeError.prototype );
  CustomError.prototype.constructor = CustomError;

  var err = new CustomError( 'boop' );

  var json = err2json( err );
  /*
      {
          "type": "TypeError",
          "name": "CustomError", 
          "message": "boop",
          "stack": "..."
      }
  */
  ```

* The function uses `instanceof` to infer the error type. Therefore, the function only works if provided an error from the same realm. The function throws an error for cross-realm error objects.

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

``` javascript
var err2json = require( '@stdlib/utils/error-to-json' );

var err = new Error( 'beep' );
var out = err2json( err );
/* returns
    {
        "type": "Error",
        "name": "Error",
        "message": "beep",
        "stack": "..."
    }
*/

err = new TypeError( 'invalid type' );
out = err2json( err );
/* returns
    {
        "type": "TypeError",
        "name": "TypeError",
        "message": "invalid type",
        "stack": "..."
    }
*/

err = new SyntaxError( 'bad syntax' );
out = err2json( err );
/* returns
    {
        "type": "SyntaxError",
        "name": "SyntaxError",
        "message": "bad syntax",
        "stack": "..."
    }
*/

err = new ReferenceError( 'unknown variable' );
out = err2json( err );
/* returns
    {
        "type": "ReferenceError",
        "name": "ReferenceError",
        "message": "unknown variable",
        "stack": "..."
    }
*/

err = new URIError( 'bad URI' );
out = err2json( err );
/* returns
    {
        "type": "URIError",
        "name": "URIError",
        "message": "bad URI",
        "stack": "..."
    }
*/

err = new RangeError( 'value out-of-range' );
out = err2json( err );
/* returns
    {
        "type": "RangeError",
        "name": "RangeError",
        "message": "value out-of-range",
        "stack": "..."
    }
*/

err = new EvalError( 'eval error' );
out = err2json( err );
/* returns
    {
        "type": "EvalError",
        "name": "EvalError",
        "message": "eval error",
        "stack": "..."
    }
*/
```

</section>

<!-- /.examples -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[json]: http://www.json.org/
[js-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error
[js-type-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError
[js-syntax-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError
[js-range-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError
[js-reference-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError
[js-uri-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError
[js-eval-error]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError
[node-system-error]: https://nodejs.org/api/errors.html#errors_class_system_error

</section>

<!-- /.links -->
