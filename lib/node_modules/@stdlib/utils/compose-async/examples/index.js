'use strict';

var composeAsync = require( './../lib' );

function a( x, y, next ) {
	setTimeout( onTimeout, 0 );
	function onTimeout() {
		next( null, x*y );
	}
}

function b( z, next ) {
	setTimeout( onTimeout, 0 );
	function onTimeout() {
		next( null, z+5 );
	}
}

function c( r, next ) {
	setTimeout( onTimeout, 0 );
	function onTimeout() {
		next( null, r/10 );
	}
}

var f = composeAsync( c, b, a );

function done( error, result ) {
	if ( error ) {
		throw error;
	}
	console.log( result );
	// => 2
}

f( 5, 3, done );
