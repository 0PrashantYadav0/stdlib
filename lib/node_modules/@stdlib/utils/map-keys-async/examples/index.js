'use strict';

var resolve = require( 'path' ).resolve;
var readFile = require( '@stdlib/fs/read-file' );
var mapKeysAsync = require( './../lib' );

var files = {
	'file1': resolve( __dirname, '..', 'package.json' ),
	'file2': resolve( __dirname, '..', 'README.md' )
};

function read( key, value, next ) {
	var opts = {
		'encoding': 'utf8'
	};
	readFile( value, opts, onFile );

	function onFile( error ) {
		if ( error ) {
			return next( error, key+':unreadable' );
		}
		next( null, key+':readable' );
	}
}

function done( error, out ) {
	if ( error ) {
		throw error;
	}
	console.log( out );
}

mapKeysAsync( files, read, done );
