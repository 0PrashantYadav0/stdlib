'use strict';

var repeatString = require( '@stdlib/string/repeat' );
var whileAsync = require( './../lib' );

function predicate( i, clbk ) {
	setTimeout( onTimeout, 0 );
	function onTimeout() {
		clbk( null, i < 5 );
	}
}

function fcn( i, next ) {
	setTimeout( onTimeout, 0 );
	function onTimeout() {
		next( null, repeatString( 'beep', i+1 ) );
	}
}

function done( error, result ) {
	if ( error ) {
		throw error;
	}
	console.log( result );
}

whileAsync( predicate, fcn, done );
