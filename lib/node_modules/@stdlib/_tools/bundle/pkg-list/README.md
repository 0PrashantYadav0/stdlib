# Bundle

> Bundle a list of packages into a single file.

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var bundle = require( '@stdlib/_tools/bundle/pkg-list' );
```

#### bundle( pkgs, \[options,] clbk )

Bundles a list of packages into a single file.

```javascript
var pkgs = [
    '@stdlib/math/base/special/erf',
    '@stdlib/math/base/special/gamma'
];

bundle( pkgs, clbk );

function clbk( error, bundle ) {
    if ( error ) {
        throw error;
    }
    console.log( bundle.toString() );
}
```

The function accepts the following `options`:

-   **namespace**: namespace format. Must be one of `tree`, `flat`, or `none`. Setting the option equal to `tree` indicates that the bundle should use a nested object namespace. A `flat` namespace uses the global project namespace, where each project package has a unique alias. A value of `none` indicates to forgo a namespace and require that each package be loaded independently. Default: `tree`.
-   **bundler**: bundler. Default: [browserify][browserify].

The function accepts the following `options` which are specific to [browserify][browserify]:

-   **standalone**: standalone [browserify][browserify] export name. Setting this option instructs the function to generate a UMD bundle with the supplied export name. The generated bundle will work with other module systems. If no module system is found, the export name is attached to the `window` global.
-   **exportName**: bundle export target. The target is the name used to load the bundle from the external environment. In contrast to a standalone UMD bundle, a require function is exposed as a global variable. Default: `@stdlib/stdlib`.
-   **requireName**: name of function exposed to supporting external loading of modules from a [browserify][browserify] bundle. Default: `require`.
-   **transforms**: an `array` of [browserify][browserify] transform modules and functions (including corresponding options) to be applied during bundling.
-   **plugins**: an `array` of [browserify][browserify] plugins (including corresponding options) to be applied during bundling.

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

```javascript
var pkgNames = require( '@stdlib/_tools/pkgs/names' );
var bundle = require( '@stdlib/_tools/bundle/pkg-list' );

var fopts = {
    'pattern': '**/assert/**/package.json',
    'ignore': [
        '**/_**/**' // ignore "private" packages
    ]
};
var bopts = {
    'namespace': 'tree',
    'exportName': '@stdlib'
};

pkgNames( fopts, onNames );

function onNames( error, names ) {
    if ( error ) {
        throw error;
    }
    bundle( names, bopts, onBundle );
}

function onBundle( error, bundle ) {
    if ( error ) {
        throw error;
    }
    console.log( bundle.toString() );
}
```

</section>

<!-- /.examples -->

<!-- Section for describing a command-line interface. -->

* * *

<section class="cli">

## CLI

<!-- CLI usage documentation. -->

<section class="usage">

### Usage

```text
Usage: bundle-pkg-list [options] [<pkg> <pkg> <pkg> ...]

Options:

  -h,    --help                Print this message.
  -V,    --version             Print the package version.
         --split sep           Separator for stdin data. Default: '/\r?\n/'.
         --namespace type      Type of namespace. Default: 'tree'.
         --bundler bundler     Bundler. Default: 'browserify'.

Browserify Options:

         --standalone name     Generate a UMD bundle with the supplied export
                               name. The generated bundle will work with other
                               module systems. If no module system is found, the
                               export name is attached to the `window` global.

         --export-name name    Bundle export target. The target is the name used
                               to load the bundle from the external environment.
                               In contrast to a standalone UMD bundle, a require
                               function is exposed as a global variable.
                               Default: '@stdlib/stdlib'.

         --require-name name   External `require` name to support requiring
                               packages within a browserify bundle from the
                               external environment. Default: 'require'.

  -t,    --transform module    Apply a transform when bundling. To apply
                               multiple transforms, set a --transform flag
                               for each transform.

  -p,    --plugin module       Register a plugin. To register multiple plugins,
                               set a --plugin flag for each plugin.
```

</section>

<!-- /.usage -->

<!-- CLI usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

-   If the split separator is a [regular expression][mdn-regexp], ensure that the `split` option is properly **escaped**.

    ```bash
    # Not escaped...
    $ echo -n $'tape\nvirtual-dom\n' | bundle-pkg-list --split /\r?\n/

    # Escaped...
    $ echo -n $'tape\nvirtual-dom\n' | bundle-pkg-list --split /\\r?\\n/
    ```

-   A bundle is output bundle is **not** minified or compressed.

</section>

<!-- /.notes -->

<!-- CLI usage examples. -->

<section class="examples">

### Examples

```bash
$ bundle-pkg-list '@stdlib/math/base/special/erf' '@stdlib/math/base/special/gamma' > ./bundle.js
```

```bash
$ echo -n $'@stdlib/math/base/special/erf\n@stdlib/math/base/special/gamma\n' | bundle-pkg-list --split /\\r?\\n/ > ./bundle.js
```

For compression/minification, pipe to a downstream utility.

```bash
$ bundle-pkg-list '@stdlib/math/base/special/erf' '@stdlib/math/base/special/gamma' | uglifyjs
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[browserify]: https://github.com/substack/node-browserify

[mdn-regexp]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions

</section>

<!-- /.links -->
