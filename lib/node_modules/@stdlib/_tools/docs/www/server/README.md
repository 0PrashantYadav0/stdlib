<!--

@license Apache-2.0

Copyright (c) 2019 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Documentation Server

> Create an HTTP server for serving API documentation.

<section class="usage">

## Usage

```javascript
var httpServer = require( '@stdlib/_tools/docs/www/server' );
```

#### httpServer( \[options] )

Returns a function which creates an HTTP server for serving API documentation.

<!-- run-disable -->

```javascript
var opts = {
    'port': 7331,
    'address': '0.0.0.0'
};
var createServer = httpServer( opts );

function done( error, fastify ) {
    if ( error ) {
        throw error;
    }
    console.log( 'Success!' );
    fastify.server.close();
}

createServer( done );
```

The function accepts the following `options`:

-   **address**: server address. Default: `'127.0.0.1'`.
-   **hostname**: server hostname (e.g., `localhost` ).
-   **logger**: `boolean` indicating whether to enable logging. Default: `false`.
-   **port**: server port. Default: `0` (i.e., randomly assigned).
-   **prefix**: URL path prefix used to create a virtual mount path for a static directory. Default: `'/'`.
-   **root**: root directory containing API documentation. May be either an absolute path or a path relative to the current working directory. Default: current working directory.
-   **static**: directory from which to serve static documentation assets and files. May be either an absolute path or a path relative to the current working directory. Default: `''`.
-   **template**: application shell template. Default: `''`.
-   **trustProxy**: `boolean` indicating whether to trust `X-forwarded-by` headers when the server is sitting behind a proxy. Default: `false`.

An application shell template should include a `{{ FRAGMENT }}` parameter into which fragments are injected.

<!-- run-disable -->

```javascript
var template = [
    '<html>',
    '<body>',
    '{{ FRAGMENT }}',
    '</body>',
    '</html>'
];

var opts = {
    'port': 7331,
    'address': '0.0.0.0',
    'template': template.join( '\n' )
};

var createServer = httpServer( opts );
```

</section>

<!-- /.usage -->

<section class="notes">

</section>

<!-- /.notes -->

<section class="examples">

## Examples

<!-- run-disable -->

<!-- eslint no-undef: "error" -->

```javascript
var join = require( 'path' ).join;
var httpServer = require( '@stdlib/_tools/docs/www/server' );

var opts = {
    'port': 3000,
    'address': '127.0.0.1',
    'logger': true,
    'root': join( __dirname, 'examples', 'fixtures' ),
    'template': '<html><body>Fragment: {{ FRAGMENT }}</body></html>'
};

var createServer = httpServer( opts );

function done( error, fastify ) {
    if ( error ) {
        console.error( error.message );
        return;
    }
    console.log( 'Success!' );
    console.log( fastify.server.address() );
    fastify.server.close();
}

createServer( done );
```

</section>

<!-- /.examples -->

* * *

<section class="cli">

## CLI

<section class="usage">

### Usage

```text
Usage: stdlib-www-doc-server [options]

Options:

  -h,    --help                      Print this message.
  -V,    --version                   Print the package version.
         --address address           Server address. Default: 127.0.0.1.
         --hostname hostname         Server hostname.
         --logger                    Enable logging.
         --port port                 Server port. Default: 0.
         --prefix prefix             Virtual mount path for static files.
         --root dir                  Root documentation directory.
         --static dir                Static file directory.
         --template filepath         Path to an application shell template.
         --trust_proxy               Trust X-forwarded-by headers.
```

</section>

<!-- /.usage -->

<section class="notes">

### Notes

-   A `template` file path may be either an absolute path or a path relative to the current working directory.

</section>

<!-- /.notes -->

<section class="examples">

### Examples

<!-- run-disable -->

```bash
$ stdlib-www-doc-server --logging
```

</section>

<!-- /.examples -->

</section>

<!-- /.cli -->

<section class="links">

</section>

<!-- /.links -->
