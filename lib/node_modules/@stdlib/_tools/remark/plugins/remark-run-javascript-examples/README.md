# JavaScript Examples

> [remark][remark] plugin to run JavaScript examples.

<section class="usage">

## Usage

```javascript
var run = require( '@stdlib/_tools/remark/plugins/remark-run-javascript-examples' );
```

#### run( options )

Attaches a [remark][remark] plugin which, when provided a Markdown abstract syntax `tree`, runs JavaScript examples.

```javascript
var remark = require( 'remark' );

var str = [
    '<section class="examples">',
    '',
    '## Examples',
    '',
    '```javascript',
    'console.log( "HELLO WORLD!" );',
    '```',
    '',
    '</section>',
    '',
    '<!-- /.examples -->'
];
str = str.join( '\n' );

remark().use( run ).process( str, done );

function done( error ) {
    if ( error ) {
        throw error;
    }
}
```

The plugin accepts the following `options`:

-   **cwd**: the current working directory when executing an example. If not specified,

    -   when provided a virtual file, the plugin sets the current working directory of the child process to the directory of the virtual file.
    -   when provided a `string`, the plugin sets the current working directory of the child process to the current working directory of the calling process.

-   **quiet**: `boolean` indicating whether to silence examples writing to `stdout`, but allow writing to `stderr`. Default: `false`.

-   **silent**: `boolean` indicating whether to silence examples writing to both `stdout` and `stderr`. Default: `false`.

To specify plugin options, provide an `options` object.

```javascript
var remark = require( 'remark' );
var cwd = require( '@stdlib/utils/cwd' );

var str = [
    '<section class="examples">',
    '',
    '## Examples',
    '',
    '```javascript',
    'console.log( "HELLO WORLD!" );',
    '```',
    '',
    '</section>',
    '',
    '<!-- /.examples -->'
];
str = str.join( '\n' );

var opts = {
    'cwd': cwd(),
    'silent': true
};

remark().use( run, opts ).process( str, done );

function done( error ) {
    if ( error ) {
        throw error;
    }
}
```

</section>

<!-- /.usage -->

<section class="notes">

## Notes

-   When processing a Markdown abstract syntax tree (AST), the plugin relies on the presence of HTML `section` elements and their associated `class` attributes to determine how to process code blocks. Consider the following example:

    <!-- lint disable code-block-style -->

        <section class="usage">

        ## Usage

        ```javascript
        var path = require( "path" );
        ```

        #### path.posix.join( [...paths] )

        ```javascript
        var p = path.posix.join( "foo", "bar" );
        ```

        </section>

        <!-- /.usage -->

        <section class="examples">

        ## Examples

        ```javascript
        console.log( 'HELLO WORLD' );
        ```

        </section>

        <!-- /.examples -->

    Upon finding a `usage` section, the plugin scans for JavaScript fenced code blocks. The first code block is considered special in that the plugin assumes that the intent of the code block is to declare the imported package. The plugin assumes that the import statement is _implicit_ in all subsequent `usage` JavaScript code blocks, and, accordingly, the first code block is **prepended** to each subsequent `usage` code block prior to execution.

    In contrast to `usage` code blocks, the plugin assumes that JavaScript code blocks in `examples` sections are **self-contained**.

-   The plugin executes **each** code block in a separate child process.

</section>

<!-- /.notes -->

<section class="examples">

## Examples

<!-- eslint-disable no-sync -->

<!-- eslint no-undef: "error" -->

```javascript
var join = require( 'path' ).join;
var remark = require( 'remark' );
var readSync = require( 'to-vfile' ).readSync;
var run = require( '@stdlib/_tools/remark/plugins/remark-run-javascript-examples' );

// Load a Markdown file:
var fpath = join( __dirname, 'examples', 'fixtures', 'file.txt' );
var file = readSync( fpath, 'utf8' );

// Run examples:
remark().use( run ).process( file, done );

function done( error ) {
    if ( error ) {
        throw error;
    }
}
```

</section>

<!-- /.examples -->

<section class="links">

[remark]: https://github.com/wooorm/remark

</section>

<!-- /.links -->
