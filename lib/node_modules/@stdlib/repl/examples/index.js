'use strict';

var repl = require( './../lib' );

// Start the REPL:
repl( onStart );

function onStart( error, r ) {
	if ( error ) {
		throw error;
	}
	// After the REPL has started, exit the process...
	setTimeout( onTimeout, 2500 );

	function onTimeout() {
		// In Node v0.10, the REPLServer instance does not have a `close()` method...
		if ( r.close ) {
			r.close();
		} else {
			process.exit( 0 ); // eslint-disable-line no-process-exit
		}
	}
}
