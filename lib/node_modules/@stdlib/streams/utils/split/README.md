# Split Stream

> [Transform stream][transform-stream] which splits streamed data.


<!-- <usage> -->

## Usage

``` javascript
var splitStream = require( '@stdlib/streams/utils/split' );
```

#### splitStream( \[options\] )

Creates a [transform stream][transform-stream] which splits streamed data.

``` javascript
var stream = splitStream();

stream.pipe( process.stdout );
stream.write( '1\n2\n3' );
// => 1 => 2 => 3

stream.end();
```

The function accepts the following `options`:

* __sep__: separator used to split streamed data. Similar to [`String#split`][string-split], a separator may be either a [regular expression][regexp] or a `string`. Default: `/\r?\n/`.
* __objectMode__: specifies whether a [stream][stream] should operate in [objectMode][object-mode]. Default: `false`.
* __encoding__: specifies how `Buffer` objects should be decoded to `strings`. Default: `null`.
* __highWaterMark__: specifies the `Buffer` level at which `write()` calls start returning `false`.
* __allowHalfOpen__: specifies whether a [stream][stream] should remain open even if one side ends. Default: `false`.
* __writableObjectMode__: specifies whether the writable side should be in [objectMode][object-mode]. Default: `false`.

To set [stream][stream] `options`,

``` javascript
var opts = {
    'sep': ',',
    'objectMode': true,
    'encoding': 'utf8',
    'highWaterMark': 64,
    'allowHalfOpen': true,
    'writableObjectMode': false // overridden by `objectMode` option when `objectMode=true`
};

var stream = splitStream( opts );
```


#### splitStream.factory( \[options\] )

Creates a reusable [stream][stream] factory. The factory method ensures [streams][stream] are configured identically by using the same set of provided `options`.

``` javascript
var opts = {
    'sep': '\t',
    'objectMode': true,
    'encoding': 'utf8',
    'highWaterMark': 64 
};

var factory = splitStream.factory( opts );

// Create 10 identically configured streams...
var streams = [];
var i;
for ( i = 0; i < 10; i++ ) {
    streams.push( factory() );
}
```


#### splitStream.objectMode( \[options\] )

This method is a convenience function to create [streams][stream] which always operate in [objectMode][object-mode]. The method will __always__ override the [`objectMode`][object-mode] option in `options`.

``` javascript
var stream = splitStream.objectMode({
    'sep': ','
});

stream.pipe( process.stdout );
stream.write( 'a,b,c' );
// => a => b => c

stream.end();
```

<!-- </usage> -->


<!-- <notes> -->

## Notes

* Similar to [`String#split`][string-split], a separator which is a [regular expression][regexp] containing a matching group will result in the separator being retained in the output stream.

  ``` javascript
  var stream = splitStream({
      'sep': /(,)/
  });

  stream.pipe( process.stdout );
  stream.write( '1,2,3' );
  // => 1 => , => 2 => , => 3

  stream.end();
  ```

<!-- </notes> -->


<!-- <examples> -->

## Examples

``` javascript
var transformStream = require( '@stdlib/streams/utils/transform' );
var splitStream = require( '@stdlib/streams/utils/split' );

function append( chunk, enc, clbk ) {
    clbk( null, chunk.toString()+'\n' );
}

var newline;
var stream;
var i;

// Create a split stream to split tab delimited data:
stream = splitStream({
    'sep': /\t/
});

// Create a transform stream to make newline delimited data...
newline = transformStream({
    'transform': append,
    'objectMode': true
});

// Create a stream pipeline:
stream
    .pipe( newline )
    .pipe( process.stdout );

// Write data to the pipeline...
for ( i = 0; i < 10; i++ ) {
    stream.write( i+'\t', 'utf8'  );
}
stream.end();
```

<!-- </examples> -->


<!-- <links> -->

[stream]: https://nodejs.org/api/stream.html
[transform-stream]: https://nodejs.org/api/stream.html
[object-mode]: https://nodejs.org/api/stream.html#stream_object_mode

[string-split]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split
[regexp]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions

<!-- </links> -->
