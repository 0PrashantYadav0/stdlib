Simple HTTP Server
===

> Create a simple HTTP server.

<!-- <usage> -->

## Usage

``` javascript
var httpServer = require( '@stdlib/tools/simple-http-server' );
```

#### httpServer( \[options,\] \[clbk\] )

Creates a simple HTTP server.

``` javascript
// Serve from the current working directory of the calling process:
httpServer();
```

The function accepts the following options:

* __html__: `buffer` or `string` to serve as HTML content.
* __javascript__: `buffer` or `string` to serve as JavaScript.
* __dir__: directory from which to serve files.
* __port__: server port. Default: `0` (i.e., randomly assigned).
* __maxport__: max server port (used when port hunting). Default: `=port`.
* __hostname__: server hostname.
* __address__: server address. Default: `"0.0.0.0"`.
* __open__: `boolean` indicating whether to launch a web browser.

By default, the server serves content from the current working directory of the calling process. To serve from an alternative directory (resolved relative to the current working directory), set the `dir` option.

``` javascript
var opts = {
    'dir': './examples'  
};
httpServer( opts );
```

To serve HTML content, set the `html` option. Once the content is requested, the server will close.

``` javascript
var opts = {
    'html': '<h1>Beep</h1>',
    'open': true
};
httpServer( opts );
```

To serve JavaScript, set the `javascript` option. If no HTML is provided, an HTML boilerplate is served and the JavaScript is served as `/bundle.js`. Once the content is requested, the server will close.

``` javascript
var opts = {
    'javascript': 'console.log( "Boop" );',
    'open': true
};
httpServer( opts );
```

If HTML and JavaScript are provided, in order for the JavaScript to be served, the HTML content should request the file `/bundle.js`.

``` javascript
var html = '<script src="/bundle.js"></script>';

var opts = {
    'html': html,
    'javascript': 'console.log( "Boop" );',
    'open': true
};

httpServer( opts );
```

To obtain the `server` handle, provide a callback.

``` javascript
function onReady( error, server ) {
    if ( error ) {
        throw error;
    }
    process.nextTick( close );
    function close() {
        server.close();
    }
}
httpServer( onReady );
```

<!-- </usage> -->


<!-- <examples> -->

## Examples

``` javascript
var path = require( 'path' );
var readFileSync = require( '@stdlib/utils/fs/read-file' ).sync;
var httpServer = require( '@stdlib/tools/simple-http-server' );

var html = path.join( __dirname, 'fixtures/index.html' );
var js = path.join( __dirname, 'fixtures/script.js' );

var opts = {
    'html': readFileSync( html ),
    'javascript': readFileSync( js ),
    'port': 7331,
    'hostname': 'localhost',
    'open': false
};

httpServer( opts, clbk );

function clbk( error, server ) {
    if ( error ) {
        throw error;
    }
    // Give the user a few seconds to open her web browser before closing the server...
    setTimeout( onTimeout, 5000 );

    function onTimeout() {
        server.close();
    }
}
```

<!-- </examples> -->


<!-- <cli> -->

---

## CLI

<!-- <usage> -->

### Usage

``` bash
Usage: simplehttpserver [options] [path]

Options:

  -h,    --help                Print this message.
  -V,    --version             Print the package version.
         --html                Serve an HTML page.
  --js,  --javascript          Serve JavaScript.
  -p,    --port port           Server port. Default: 0.
         --maxport maxport     Max server port. Default: `port`.
         --hostname hostname   Server hostname.
         --address address     Server address. Default: 0.0.0.0.
         --open                Launch a browser once server is ready.
```

The application recognizes the following [environment variables][environment-variable]:

* `DEBUG`: enable verbose logging.
* `PORT`: server port.
* `MAXPORT`: max server port.
* `HOSTNAME`: server hostname.
* `ADDRESS`: server address.


<!-- </usage> -->


<!-- <notes> -->

### Notes

* Command-line arguments __always__ take precedence over [environment variables][environment-variable].

<!-- </notes> -->


<!-- <examples> -->

### Examples

To serve content from the current directory,

``` bash
$ DEBUG=* simplehttpserver
# => '...'
```

To serve content from an alternative directory,

``` bash
$ DEBUG=* simplehttpserver ./examples
# => '...'
```

To serve an HTML file,

``` bash
$ DEBUG=* simplehttpserver --html ./examples/fixtures/index.html
# => '...'
```

To serve a JavaScript file (and a default HTML boilerplate),

``` bash
$ DEBUG=* simplehttpserver --javascript ./examples/fixtures/script.js
# => '...'
```

In addition to file input, the application accepts [standard input][standard-streams]. To pipe HTML,

``` bash
$ DEBUG=* cat ./examples/fixtures/index.html | simplehttpserver --port 7331 --html
# => '...'
```

Note the inclusion of the `--html` command-line flag. This indicates the type of content being piped to the application. Accordingly, to pipe JavaScript (and serve a default HTML boilerplate), we include the `--javascript` command-line flag.

``` bash
$ DEBUG=* cat ./examples/fixtures/script.js | simplehttpserver --address '127.0.0.1' --javascript
# => '...'
```

To pipe JavaScript and serve custom HTML content which requests a `/bundle.js` file,

``` bash
$ DEBUG=* cat ./examples/fixtures/script.js | simplehttpserver ./examples/fixtures/index.html --javascript --html
# => '...'
```

Note the use of both the `--html` and `--javascript` command-line flags. When provided both flags, the application interprets `stdin` as JavaScript and reads the file as HTML. 

<!-- </examples> -->

<!-- </cli> -->


<!-- <links> -->

[environment-variable]: https://en.wikipedia.org/wiki/Environment_variable
[standard-streams]: https://en.wikipedia.org/wiki/Standard_streams

<!-- </links> -->
