'use strict';

// MODULES //

var tape = require( 'tape' );
var abs = require( '@stdlib/math/base/special/abs' );
var pKolmogorov1 = require( './../lib/smirnov.js' );


// FUNCTIONS //

function almostEqual( a, b, tol ) {
	var delta = abs( a - b );
	tol = tol * abs( b );
	return ( delta <= tol );
}


// TESTS //

tape( 'main export is a function', function test( t ) {
	t.ok( true, __filename );
	t.equal( typeof pKolmogorov1, 'function', 'main export is a function' );
	t.end();
});

tape( 'the function correctly evaluates the CDF of D_n^+ and D_n^-', function test( t ) {
	var bool;

	bool = almostEqual( pKolmogorov1( 0.3, 10.0 ), 0.8645364, 1e-7 );
	t.ok( bool, 'returns correct value' );
	bool = almostEqual( pKolmogorov1( -0.1, 10.0 ), 0.0, 1e-7 );
	t.ok( bool, 'returns correct value' );
	bool = almostEqual( pKolmogorov1( 1.5, 10.0 ), 1.0, 1e-7 );
	t.ok( bool, 'returns correct value' );
	bool = almostEqual( pKolmogorov1( 0.5, 40.0 ), 0.9999999, 1e-7 );
	t.ok( bool, 'returns correct value' );
	bool = almostEqual( pKolmogorov1( 0.1, 4.0 ), 0.13310000, 1e-7 );
	t.ok( bool, 'returns correct value' );
	bool = almostEqual( pKolmogorov1( 0.1, 20.0 ), 0.37092898, 1e-7 );
	t.ok( bool, 'returns correct value' );

	t.end();

});
