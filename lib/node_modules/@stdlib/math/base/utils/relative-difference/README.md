Relative Difference
===

> Compute the [relative difference][relative-difference] of two real numbers.


<section class="intro">

The [relative difference][relative-difference] of two real `numbers` is defined as

<!-- <equation class="equation" label="eq:relative_difference" align="center" raw="\Delta(x,y) = \frac{|x - y|}{|f(x,y)|} = \left|\frac{x - y}{f(x,y)}\right|" alt="Relative difference"> -->

<div class="equation" align="center" data-raw-text="\Delta(x,y) = \frac{|x - y|}{|f(x,y)|} = \left|\frac{x - y}{f(x,y)}\right|" data-equation="eq:relative_difference">
    <img src="" alt="Relative difference">
    <br>
</div>

<!-- </equation> -->

where `|x-y|` is the [absolute difference][absolute-difference] and `f(x,y)` is a scale function. Common scale functions include

<!-- <equation class="equation" label="eq:scale_functions" align="center" raw="\begin{align*}f(x,y) &= \max(|x|, |y|)\\f(x,y) &= \max(x,y)\\ f(x,y) &= \min(|x|,|y|)\\f(x,y) &= \min(x,y) \\f(x,y) &= \frac{|x|+|y|}{2} \\f(x,y) &= \frac{x + y}{2}\end{align*}" alt="Scale functions"> -->

<div class="equation" align="center" data-raw-text="\begin{align*}f(x,y) &amp;= \max(|x|, |y|)\\f(x,y) &amp;= \max(x,y)\\ f(x,y) &amp;= \min(|x|,|y|)\\f(x,y) &amp;= \min(x,y) \\f(x,y) &amp;= \frac{|x|+|y|}{2} \\f(x,y) &amp;= \frac{x + y}{2}\end{align*}" data-equation="eq:scale_functions">
    <img src="" alt="Scale functions">
    <br>
</div>

<!-- </equation> -->

The choice of scale function depends on application context.

<!-- </intro> -->


<section class="usage">

## Usage

``` javascript
var reldiff = require( '@stdlib/math/base/utils/relative-difference' );
```

#### relreldiff( x, y\[, scale\] )

Computes the [relative difference][relative-difference] of two real numbers.

``` javascript
var d = reldiff( 2.0, 5.0 ); // => 3/5
// returns 0.6

d = reldiff( -1.0, 3.14 ); // => 4.14/3.14
// returns ~1.318
```

The following `scale` functions are supported:

* __max-abs__: maximum [absolute value][absolute-value] of `x` and `y` (*default*).
* __max__: maximum value of `x` and `y`.
* __min-abs__: minimum [absolute value][absolute-value] of `x` and `y`.
* __min__: minimum value of `x` and `y`.
* __mean-abs__: arithmetic mean of the [absolute values][absolute-value] of `x` and `y`.
* __mean__: arithmetic mean of `x` and `y`.
* __x__: `x` (*noncommutative*).
* __y__: `y` (*noncommutative*).

By default, the function scales the [absolute difference][absolute-difference] by dividing the [absolute difference][absolute-difference] by the maximum [absolute value][absolute-value] of `x` and `y`. To scale by a different function, specify a scale function name.

``` javascript
var d = reldiff( -2.0, 5.0 ); // => |-7/5|
// returns 1.4

d = reldiff( -2.0, 5.0, 'max-abs' ); // => |-7/5|
// returns 1.4

d = reldiff( -2.0, 5.0, 'max' ); // => |-7/5|
// returns 1.4

d = reldiff( -2.0, 5.0, 'min-abs' ); // => |-7/2|
// returns 3.5

d = reldiff( -2.0, 5.0, 'min' ); // => |-7/-2|
// returns 3.5

d = reldiff( -2.0, 5.0, 'mean-abs' ); // => |-7/3.5|
// returns 2.0

d = reldiff( -2.0, 5.0, 'mean' ); // => |-7/1.5|
// returns ~4.67

d = reldiff( -2.0, 5.0, 'x' ); // => |-7/-2|
// returns 3.5

d = reldiff( 5.0, -2.0, 'x' ); // => |7/5|
// returns 1.4

d = reldiff( -2.0, 5.0, 'y' ); // => |-7/5|
// returns 1.4

d = reldiff( 5.0, -2.0, 'y' ); // => |7/-2|
// returns 3.5
```

To use a custom scale `function`, provide a `function` which accepts two numeric arguments `x` and `y`.

``` javascript
var abs = require( '@stdlib/math/base/special/abs' );
var EPS = require( '@stdlib/math/constants/float64-eps' );

function scale( x, y ) {
    var s;
    x = abs( x );
    y = abs( y );

    // Maximum absolute value:
    s = (x < y ) ? y : x;

    // Scale in units of epsilon:
    return s * EPS;
}

var d = reldiff( 12.15, 12.149999999999999, scale );
// returns ~0.658
```

<!-- </usage> -->


<section class="notes">

## Notes

* If the [absolute difference][absolute-difference] of `x` and `y` is `0`, the relative difference is __always__ `0`.

    ``` javascript
    var d = reldiff( 0.0, 0.0 );
    // returns 0.0

    d = reldiff( 3.14, 3.14 );
    // returns 0.0
    ```

* If `|x| = |y| = infinity`, the function returns `NaN`.

    ``` javascript
    var PINF = Number.POSITIVE_INFINITY;
    var NINF = Number.NEGATIVE_INFINITY;

    var d = reldiff( PINF, PINF );
    // returns NaN

    d = reldiff( NINF, NINF );
    // returns NaN
    ```

* If `|x| = |-y| = infinity`, the relative difference is `+infinity`.

    ``` javascript
    var PINF = Number.POSITIVE_INFINITY;
    var NINF = Number.NEGATIVE_INFINITY;

    var d = reldiff( PINF, NINF );
    // returns PINF

    d = reldiff( NINF, PINF );
    // returns PINF
    ```

* If a `scale` function returns `0`, the function returns `NaN`.

    ``` javascript
    var d = reldiff( 0.0, 2.0, 'mean' ); // => |2/1|
    // returns 2.0

    d = reldiff( -1.0, 1.0, 'mean' ); // => |2/0|
    // returns NaN
    ```

<!-- </notes> -->


<section class="examples">

## Examples

``` javascript
var randu = require( '@stdlib/math/base/random/randu' );
var reldiff = require( '@stdlib/math/base/utils/relative-difference' );

var scales = [ 'max-abs', 'max', 'min-abs', 'min', 'mean-abs', 'mean', 'x', 'y' ];
var x;
var y;
var d;
var i;
var j;

for ( i = 0; i < 100; i++ ) {
    x = randu()*1.0e4 - 5.0e3;
    y = randu()*1.0e4 - 5.0e3;
    for ( j = 0; j < scales.length; j++ ) {
        d = reldiff( x, y, scales[j] );
        console.log( 'x = %d. y = %d. d = %d. scale: %s.', x, y, d, scales[j] );
    }
}
```

<!-- </examples> -->


<section class="links">

<!-- FIXME: links -->

[absolute-value]: https://github.com/math-io/abs
[absolute-difference]: https://github.com/math-io/absolute-difference

[relative-difference]: https://en.wikipedia.org/wiki/Relative_change_and_difference

<!-- </links> -->
