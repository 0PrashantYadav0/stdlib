Epsilon Difference
===

> Compute the [relative difference][relative-difference] of two real numbers in units of [double-precision floating-point epsilon][float64-epsilon].


<!-- <usage> -->

## Usage

``` javascript
var epsdiff = require( '@stdlib/math/base/utils/float64-epsilon-difference' );
```

#### epsdiff( x, y[, scale] )

Computes the [relative difference][relative-difference] of two real numbers in units of [double-precision floating-point epsilon][float64-epsilon].

``` javascript
var d = epsdiff( 12.15, 12.149999999999999 ); // => ~0.658ε
// returns ~0.658
```

The following [`scale`][relative-difference] functions are supported:

*   __max-abs__: maximum [absolute value][absolute-value] of `x` and `y` (*default*).
*   __max__: maximum value of `x` and `y`.
*   __min-abs__: minimum [absolute value][absolute-value] of `x` and `y`.
*   __min__: minimum value of `x` and `y`.
*   __mean-abs__: arithmetic mean of the [absolute values][absolute-value] of `x` and `y`.
*   __mean__: arithmetic mean of `x` and `y`.
*   __x__: `x` (*noncommutative*).
*   __y__: `y` (*noncommutative*).

By default, the function scales the [absolute difference][absolute-difference] by dividing the [absolute difference][absolute-difference] by the maximum [absolute value][absolute-value] of `x` and `y`. To scale by a different function, specify a scale function name.

``` javascript
var d = epsdiff( 2.4341309458983933, 2.4341309458633909, 'mean-abs' ); // => ~64761.5ε => ~1.438e-11
// returns ~64761.5
```

To use a custom scale function, provide a `function` which accepts two numeric arguments `x` and `y`.

``` javascript
function scale( x, y ) {
    // Return the minimum value:
    return ( x > y ) ? y : x;
}

var d = epsdiff( 1.0000000000000002, 1.0000000000000100, scale ); // => ~44ε
// returns ~44
```

<!-- </usage> -->


<!-- <notes> -->

## Notes

* If computing the [relative difference][relative-difference] in units of [epsilon][float64-epsilon] will result in overflow, the function returns the [maximum double-precision floating-point number][max-float64].

    ``` javascript
    var d = epsdiff( 1.0e304, 1.0, 'min' ); // => ~1.798e308ε => 1.0e304/ε overflows
    // returns ~1.798e308
    ```

* If the [absolute difference][absolute-difference] of `x` and `y` is `0`, the [relative difference][relative-difference] is __always__ `0`.

    ``` javascript
    var d = epsdiff( 0.0, 0.0 );
    // returns 0.0

    d = epsdiff( 3.14, 3.14 );
    // returns 0.0
    ```

* If `x = y = +infinity` or `x = y = -infinity`, the function returns `NaN`.

    ``` javascript
    var PINF = require( '@stdlib/math/constants/float64-pinf' );
    var NINF = require( '@stdlib/math/constants/float64-ninf' );

    var d = epsdiff( PINF, PINF );
    // returns NaN

    d = epsdiff( NINF, NINF );
    // returns NaN
    ```

* If `x = -y = +infinity` or `-x = y = +infinity`, the [relative difference][relative-difference] is `+infinity`.

    ``` javascript
    var PINF = require( '@stdlib/math/constants/float64-pinf' );
    var NINF = require( '@stdlib/math/constants/float64-ninf' );

    var d = epsdiff( PINF, NINF );
    // returns Number.POSITIVE_INFINITY

    d = epsdiff( NINF, PINF );
    // returns Number.POSITIVE_INFINITY
    ```

* If a `scale` function returns `0`, the function returns `NaN`.

    ``` javascript
    var d = epsdiff( -1.0, 1.0, 'mean' ); // => |2/0|
    // returns NaN
    ```

<!-- </notes> -->


<!-- <examples> -->

## Examples

``` javascript
var randu = require( '@stdlib/math/base/random/randu' );
var EPS = require( '@stdlib/math/constants/float64-eps' );
var epsdiff = require( '@stdlib/math/base/utils/float64-epsilon-difference' );

var sign;
var x;
var y;
var d;
var i;

for ( i = 0; i < 100; i++ ) {
    x = randu();
    sign = ( randu() > 0.5 ) ? 1.0 : -1.0;
    y = x + sign*EPS*i;
    d = epsdiff( x, y );
    console.log( 'x = %d. y = %d. d = %dε.', x, y, d );
}
```

<!-- </examples> -->


<!-- <links> -->

<!-- FIXME: links -->

[float64-epsilon]: https://github.com/const-io/eps-float64
[max-float64]: https://github.com/const-io/max-float64
[absolute-value]: https://github.com/math-io/abs
[absolute-difference]: https://github.com/math-io/absolute-difference
[relative-difference]: https://github.com/math-io/relative-difference

<!-- </links> -->
