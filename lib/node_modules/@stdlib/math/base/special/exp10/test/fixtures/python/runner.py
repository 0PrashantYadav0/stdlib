#!/usr/bin/env python

import numpy as np
from scipy import special
from math import pi
import json
import os

"""gen( x, name )

Generate fixture data and write to file.

# Arguments

* `x`: domain
* `name::AbstractString`: output filename

# Examples

``` python
python> x = linspace( -1000, 1000, 2001 );
python> gen( x, \"./data.json\" );
```
"""
def gen( x, name ):
    y = special.exp10( x );
    data = {
        "x": x.tolist(),
        "expected": y.tolist()
    };

    # Based on the script directory, create an output filepath:
    filepath = os.path.join( dir, name )

    with open( filepath, 'w' ) as outfile:
        json.dump( data, outfile )

# Get the file path:
file = os.path.realpath( __file__ )

# Extract the directory in which this file resides:
dir = os.path.dirname( file )

# Medium negative values:
x = np.linspace( -300.0, -1.0, 2003 )
gen( x, "medium_negative.json" );

# Medium positive values:
x = np.linspace( 1.0, 300.0, 2003 )
gen( x, "medium_positive.json" );

# Small negative values:
x = np.linspace( -1.0, -2^-54, 1000 ); # TODO: improve range
gen( x, "small_negative.json" );

# Small positive values:
x = np.linspace( 2^-54, 1.0, 1000 ); # TODO: improve range
gen( x, "small_positive.json" );

# Tiny values:
x = np.linspace( -2^-54, 2^-54, 1000 );  # TODO: improve range
gen( x, "tiny.json" );
