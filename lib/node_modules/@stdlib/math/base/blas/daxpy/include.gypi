# A GYP include file for building a Node.js native add-on.
#
# [1]: https://gyp.gsrc.io/docs/InputFormatReference.md
# [2]: https://gyp.gsrc.io/docs/UserDocumentation.md
{
  # Define variables to be used throughout the configuration for all targets:
  'variables': {
    # Source directory:
    'src_dir': './src',

    # Include directory:
    'include_dir': 'include',

    # Add-on destination directory:
    'addon_output_dir': './src',

    # Add-ons:
    'addon_src_files': [
      '<(src_dir)/addon.cpp',
    ],

    # Apply conditions based on the host OS:
    'conditions': [
      [
        'OS=="win"',
        {
          # Fortran files:
          'fortran_src_files': [],

          # C files:
          'c_src_files': [
            '<(src_dir)/daxpy.c',
          ],

          # Source files:
          'src_files': [
            '<@(fortran_src_files)',
            '<@(c_src_files)',
            '<@(addon_src_files)',
          ],
        },

        # Non-Windows environments:
        {
          # Fortran files:
          'fortran_src_files': [
            '<(src_dir)/daxpy.f',
          ],

          # C files:
          'c_src_files': [
            '<(src_dir)/daxpy_f.c',
          ],

          # Source files:
          'src_files': [
            '<@(fortran_src_files)',
            '<@(c_src_files)',
            '<@(addon_src_files)',
          ],
        },
      ], # end condition (OS=="win")
    ], # end conditions
  }, # end variables
}
