/**
* Compute the sum of absolute values.
*
* This addon provides an interface to the BLAS Level 1 routine `dasum`.
*
* @see <a href="http://www.netlib.org/lapack/explore-html/de/da4/group__double__blas__level1.html">dasum</a>
*/
#include <nan.h>
#include "dasum.h"

/**
* Computes the sum of absolute values.
*
* When called from JavaScript, the function expects three arguments:
*
* * __N__: number of elements to sum.
* * __X__: input `Float64Array`.
* * __stride__: stride length.
*
* @param info   arguments
*/
void node_dasum(const Nan::FunctionCallbackInfo<v8::Value>& info) {
	const int N = info[0]->Uint32Value();
	Nan::TypedArrayContents<double> X(info[1]);
	const int stride = info[2]->Uint32Value();

	v8::Local<v8::Number> sum = Nan::New(c_dasum(N, *X, stride));
	info.GetReturnValue().Set(sum);
}

NAN_MODULE_INIT(Init) {
	Nan::Export(target, "dasum", node_dasum);
}

NODE_MODULE(addon, Init)
