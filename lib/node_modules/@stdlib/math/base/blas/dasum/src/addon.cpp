#include <nan.h>
#include "dasum.h"

void node_dasum(const Nan::FunctionCallbackInfo<v8::Value>& info) {
	const int N = info[0]->Uint32Value();
	Nan::TypedArrayContents<double> X(info[1]);
	const int stride = info[2]->Uint32Value();

	v8::Local<v8::Number> sum = Nan::New(c_dasum(N, *X, stride));
	info.GetReturnValue().Set(sum);
}

NAN_MODULE_INIT(Init) {
	Nan::Export(target, "dasum", node_dasum);
}

NODE_MODULE(addon, Init)
