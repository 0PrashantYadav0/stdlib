
# VARIABLES #

# Define the program used for compiling Fortran source files:
FORTRAN ?= gfortran

# Define the command-line options when compiling Fortran files:
FORTRAN_FLAGS ?= -std=f95 -ffree-form -Wall -Wextra -Wimplicit-interface -fcheck=bounds -fno-underscoring -pedantic

# Define the program used for compiling C source files:
CC ?= gcc

# Define the command-line options when compiling C files (`-O3` for aggressive optimization):
CFLAGS ?= -O3

# List of Fortran targets:
fortran_files := dasum.o dasum_wrapper.o

# List of C targets:
c_files := c_dasum.o


# TARGETS #

# Default target.
#
# This target is the default target.

all: $(fortran_files) $(c_files)

.PHONY: all


# Compile Fortran source.
#
# This target compiles Fortran source files.

.f.o:
	$(FORTRAN) $(FORTRAN_FLAGS) -c -o $@ $<


# Compile C source.
#
# This target compiles C source files.

.c.o:
	$(CC) $(CFLAGS) -I ../include -c -o $@ $<


# Perform clean-up.
#
# This target removes generated files.

clean:
	$(QUIET) rm -f *.o

.PHONY: clean
