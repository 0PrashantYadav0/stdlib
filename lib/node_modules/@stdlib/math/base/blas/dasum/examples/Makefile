
# VARIABLES #

# Define the program used for compiled C source files:
CC ?= gcc

# Define the command-line options when compiling C files (`-O3` for aggressive optimization):
CFLAGS ?= -O3

# Define the program for linking compiled files:
LINKER ?= gfortran

# Define the command-line options when linking compiled files:
LINKER_FLAGS ?=

# List of Fortran targets:
fortran_files := ./../src/dasum.o ./../src/dasum_wrapper.o

# List of C targets:
c_files := ./../src/c_dasum.o


# TARGETS #

# Default target.
#
# This target is the default target.

all: example

.PHONY: all


# Compile C source.
#
# This target compiles C source files.

.c.o:
	$(CC) $(CFLAGS) -I ../include -c -o $@ $<


# Generate executable.
#
# This target links object files to generate an executable.

example: example.o
	$(LINKER) $(LINKER_FLAGS) -o example.out example.o $(c_files) $(fortran_files)

.PHONY: example


# Perform clean-up.
#
# This target removes generated files.

clean:
	$(QUIET) rm -f *.o example.out

.PHONY: clean
