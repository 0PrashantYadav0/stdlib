
# VARIABLES #

# Determine the absolute path of the Makefile (see http://blog.jgc.org/2007/01/what-makefile-am-i-in.html):
this_dir := $(dir $(CURDIR)/$(word $(words $(MAKEFILE_LIST)),$(MAKEFILE_LIST)))

# Remove the trailing slash:
this_dir := $(patsubst %/,%,$(this_dir))

# Define the root package directory:
root_dir := $(this_dir)

# Define the directory containing source files:
src_dir := $(root_dir)/src

# Define the directory containing example files:
examples_dir := $(root_dir)/examples


# TARGETS #

# Default target.
#
# This target is the default target.

all:
	cd $(src_dir) && $(MAKE) all

.PHONY: all


# Perform clean-up.
#
# This target removes generated files.

clean:
	cd $(src_dir) && $(MAKE) clean
	cd $(examples_dir) && $(MAKE) clean

.PHONY: clean


# Run examples.
#
# This target compiles and runs example files.

examples:
	cd $(examples_dir) && $(MAKE) all && $(MAKE) run

.PHONY: examples


# List libraries.
#
# This target lists compiled libraries.

libraries:
	cd $(src_dir) && $(MAKE) libraries

.PHONY: libraries
