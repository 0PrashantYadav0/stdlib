'use strict';

// MODULES //

var path = require( 'path' );
var toHTML = require( 'vdom-to-html' );
var readFileSync = require( '@stdlib/fs/read-file' ).sync;
var httpServer = require( '@stdlib/tools/disposable-http-server' );


// VIEW //

/**
* Opens a plot in a browser window.
*
* @private
* @param {VTree} vtree - virtual DOM tree
*/
function view( vtree ) {
	var index;
	var html;

	// Transform the virtual DOM tree to HTML:
	html = toHTML( vtree );

	// Inject the HTML:
	index = path.join( __dirname, 'index.html' );
	index = readFileSync( index, {
		'encoding': 'utf8'
	});

	index = index.replace( /\{\{plot\}\}/, html );

	// Create a disposable HTTP server:
	httpServer({
		'html': index,
		'open': true
	});
} // end FUNCTION view()


// EXPORTS //

module.exports = view;
