'use strict';

// MODULES //

var copy = require( '@stdlib/utils/copy' );
var isNumber = require( '@stdlib/utils/is-number' ).isPrimitive;
var timeseries = require( '@stdlib/plot/time-series' );
var defaults = require( './defaults.json' );
var validate = require( './validate.js' );


// PLOT //

/**
* Plots data.
*
* @param {*} x - x data
* @param {*} y - y data
* @param {Options} [options] - plot options
* TODO
* @throws {TypeError} must provide valid options
* @returns {Plot} plot instance
*
* @example
* TODO
*/
function plot( x, y, options ) {
	var opts;
	var err;
	var _y;

	opts = copy( defaults );
	if ( arguments.length > 2 ) {
		err = validate( opts, options );
		if ( err ) {
			throw err;
		}
	}
	// TODO: could sniff `x` and `y` values to determine the "best" plot type, if a type is not specified; e.g., for time series, if `x` is a string array and the first entry converts to a valid date, can prob assume time series. If not, assume, say, column chart.
	// TODO: output modes; default could be to browsers

	if ( opts.type === 'timeseries' ) {
		// Sniff to see if provided a single numeric array...
		if ( isNumber( y[ 0 ] ) ) {
			_y = [ y ];
		} else {
			_y = y;
		}
		return timeseries({
			'x': x,
			'y': _y,
			'width': opts.width,
			'height': opts.height,
			'engine': opts.engine
		});
	}
} // end FUNCTION plot()


// EXPORTS //

module.exports = plot;
