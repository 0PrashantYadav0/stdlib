'use strict';

// MODULES //

var debug = require( 'debug' )( 'axis:engine:components:domain' );
var h = require( 'virtual-dom/h' );


// VARIABLES //

var ELEMENT = 'g';
var PROPS = {
	'namespace': 'http://www.w3.org/2000/svg',
	'property': 'axis.domain',
	'className': 'domain',
	'attributes': {
		'stroke': '#000',
		'd': null
	}
};
var CHILDREN = [];


// RENDER //

/**
* Axis domain component returned as a virtual DOM tree.
*
* @private
* @param {Object} ctx - context
* @returns {VTree} virtual tree
*/
function render( ctx ) {
	var orient;
	var range0;
	var range1;
	var offset;
	var range;
	var d;

	orient = ctx.state.orientation;
	debug( 'Axis orientation: %s.', orient );

	range = ctx.state.scale.range();
	debug( 'Axis range: %s.', JSON.stringify( range ) );

	range0 = range[ 0 ] + 0.5;
	range1 = range[ range.length-1 ] + 0.5;

	// https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d
	offset = ctx.tickDir() * ctx.state.tickSizeOuter;
	d = '';
	if ( orient === 'left' || orient === 'right' ) {
		d += 'M' + offset + ',' + range0;
		d += 'H0.5';
		d += 'V' + range1;
		d += 'H' + offset;
	} else {
		d += 'M' + range0 + ',' + offset;
		d += 'V0.5';
		d += 'H' + range1;
		d += 'V' + offset;
	}
	debug( 'Domain path: %s.', d );
	PROPS.attributes.d = d;

	debug( 'Generating a virtual DOM tree (%s) with properties: %s.', ELEMENT, JSON.stringify( PROPS ) );

	return h( ELEMENT, PROPS, CHILDREN );
} // end FUNCTION render()


// EXPORTS //

module.exports = render;
