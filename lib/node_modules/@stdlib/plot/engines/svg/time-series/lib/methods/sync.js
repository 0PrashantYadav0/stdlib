'use strict';

// MODULES //

var timeFormat = require( 'd3-time-format' ).timeFormat;
var format = require( 'd3-format' ).format;


// SYNC //

/**
* Syncs an engine state.
*
* @private
*/
function sync() {
	/* jshint validthis: true */

	this.xTickFormat = timeFormat( this.state.xTickFormat );
	this.yTickFormat = ( this.state.yTickFormat ) ? format( this.state.yTickFormat ) : null;

	// Scales...
	this.xScale
		.domain( this.xDomain() )
		.range( this.xRange() );

	this.yScale
		.domain( this.yDomain() )
		.range( this.yRange() );

	// Axes...
	this.xAxis
		.scale( this.xScale )
		.orient( this.state.xAxisOrient )
		.tickFormat( this.xTickFormat )
		.ticks( this.state.xNumTicks );

	this.yAxis
		.scale( this.yScale )
		.orient( this.state.yAxisOrient )
		.tickFormat( this.yTickFormat )
		.ticks( this.state.yNumTicks );

	// Paths...
	this.line
		.x( this.xPos )
		.y( this.yPos )
		.defined( this.state.isDefined );
		// .interpolate( this.state.interpolation ) // TODO: provide curve factory
		// .tension( this.state.tension );

} // end FUNCTION sync()


// EXPORTS //

module.exports = sync;
