<!--

@license Apache-2.0

Copyright (c) 2018 The Stdlib Authors.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.

-->

# Sparkline

> Base class for Unicode sparklines.

<section class="usage">

## Usage

```javascript
var Sparkline = require( '@stdlib/plot/sparklines/unicode/base' );
```

#### Sparkline( \[options] )

Returns a `sparkline` instance.

```javascript
var sparkline = new Sparkline();
```

The constructor accepts the following `options`:

-   **data**: sparkline data.
-   **yValue**: y-value accessor. Default: identity function.
-   **yMin**: minimum value of the y-axis domain.
-   **yMax**: maximum value of the y-axis domain.
-   **window**: sliding window size. If provided, data is kept in a first-in first-out (FIFO) buffer which cannot exceed the `window` size. Default: `+infinity`.
-   **infinities**: `boolean` flag indicating whether to encode infinite values. Default: `false`.

### Properties

A `sparkline` instance has the following properties...

#### sparkline.data

Sparkline data. When set, the value must be either an `array` or typed array and cannot exceed the `window` size.

```javascript
var Float32Array = require( '@stdlib/array/float32' );

sparkline.data = [ 5, 4, 3, 2, 1 ];
sparkline.data = new Float32Array( [ 3.14, 5.0, -3.14, -1.0 ] );
```

When set, data is converted to a standard representation. The returned data is a copy of this representation.

```javascript
sparkline.data = [ 3, 1, 2 ];

var data = sparkline.data;
// returns [ { 'y': 3 }, { 'y': 1 }, { 'y': 2 } ]
```

#### sparkline.yMin

Minimum value of the y-axis domain. For certain sparkline implementations, setting this value will fix the minimum value.

```javascript
sparkline.yMin = -100.0;
```

#### sparkline.yMax

Maximum value of the y-axis domain. For certain sparkline implementations, setting this value will fix the maximum value.

```javascript
sparkline.yMax = 100.0;
```

#### sparkline.window

Sliding window size. If set, this specifies the maximum number of data elements which can be rendered. Once the window buffer is full, each new datum results in the oldest datum being removed.

```javascript
sparkline.data = [ 1, 2, 3 ];
sparkline.window = 3;

var data = sparkline.data;
// returns [ { 'y': 1 }, { 'y': 2 }, { 'y': 3 } ]

sparkline.push( 4 );

data = sparkline.data;
// returns [ { 'y': 2 }, { 'y': 3 }, { 'y': 4 } ]
```

Setting a window size is useful when rendering data streams.

#### sparkline.infinities

`Boolean` flag indicating whether to render infinite values. Depending on the sparkline implementation, when set to `false`, infinite values may be considered missing values. When set to `true`, an implementation may support special rendering modes.

```javascript
// Instruct a sparkline implementation to render infinite values:
sparkline.infinities = true;
```

### Methods

A `sparkline` instance has the following methods...

#### sparkline.push( datum )

Append data to a sparkline.

```javascript
sparkline.data = [ 1, 2, 3 ];

var data = sparkline.data;
// returns [ { 'y': 1 }, { 'y': 2 }, { 'y': 3 } ]

sparkline.push( 4 );

data = sparkline.data;
// returns [ { 'y': 1 }, { 'y': 2 }, { 'y': 3 }, { 'y': 4 } ]
```

#### sparkline.render()

Renders a sparkline. This method **should be** implemented by `Sparkline` descendants.

#### sparkline.toString()

Serializes a sparkline as a `string` by calling the `render()` method.

```javascript
var str = sparkline.toString();
// returns '...'
```

</section>

<!-- /.usage -->

<section class="examples">

## Examples

<!-- eslint-disable no-restricted-syntax, no-underscore-dangle -->

<!-- eslint no-undef: "error" -->

```javascript
var inherit = require( '@stdlib/utils/inherit' );
var Sparkline = require( '@stdlib/plot/sparklines/unicode/base' );

// Define a chart constructor:
function Chart( opts ) {
    if ( opts === void 0 ) {
        opts = {};
    }
    // Call the parent constructor:
    Sparkline.call( this, opts );

    return this;
}

// Inherit from the Sparkline constructor:
inherit( Chart, Sparkline );

// Implement a custom render method:
Chart.prototype._render = function render() {
    var str;
    var i;

    str = '';
    for ( i = 0; i < this._data.length; i++ ) {
        if ( this._data[ i ] > 0 ) {
            str += '↑';
        } else {
            str += '↓';
        }
    }
    return str;
};

// Create a new chart instance:
var chart = new Chart();

// Set chart data:
chart.data = [ 1, 0, 0, 1, 0, 1, 1, 1, 0, 1, 1, 0, 0 ];

// Render the chart:
console.log( chart.render() );
// => '↑↓↓↑↓↑↑↑↓↑↑↓↓'
```

</section>

<!-- /.examples -->

<section class="links">

</section>

<!-- /.links -->
