# fromArrayBuffer

> Allocate a [buffer][@stdlib/types/buffer/ctor] from an [ArrayBuffer][@stdlib/types/array/buffer].

<!-- Section to include introductory text. Make sure to keep an empty line after the intro `section` element and another before the `/section` close. -->

<section class="intro">

</section>

<!-- /.intro -->

<!-- Package usage documentation. -->

<section class="usage">

## Usage

```javascript
var fromArrayBuffer = require( '@stdlib/types/buffer/from-arraybuffer' );
```

#### fromArrayBuffer( buf\[, byteOffset\[, length]] )

Allocates a [buffer][@stdlib/types/buffer/ctor] from an [`ArrayBuffer`][@stdlib/types/array/buffer].

```javascript
var ArrayBuffer = require( '@stdlib/types/array/buffer' );
var ab = new ArrayBuffer( 10 );

var buf = fromArrayBuffer( ab );
// returns <Buffer>
```

By default, the function allocates a [buffer][@stdlib/types/buffer/ctor] starting from the first byte of the provided [`ArrayBuffer`][@stdlib/types/array/buffer]. To specify an alternative starting index, provide a `byteOffset`.

```javascript
var ArrayBuffer = require( '@stdlib/types/array/buffer' );
var ab = new ArrayBuffer( 10 );

var buf = fromArrayBuffer( ab, 2 );
// returns <Buffer>

var len = buf.length;
// returns 8
```

By default, the function allocates a [buffer][@stdlib/types/buffer/ctor] until the end of the provided [`ArrayBuffer`][@stdlib/types/array/buffer]. To allocate a specified number of [`ArrayBuffer`][@stdlib/types/array/buffer] bytes, provide a `length`.

```javascript
var ArrayBuffer = require( '@stdlib/types/array/buffer' );
var ab = new ArrayBuffer( 10 );

var buf = fromArrayBuffer( ab, 2, 4 );
// returns <Buffer>

var len = buf.length;
// returns 4
```

</section>

<!-- /.usage -->

<!-- Package usage notes. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="notes">

## Notes

The behavior of this function varies across Node.js versions due to changes in the underlying Node.js APIs:

-   `<3.0.0`: the function copies [`ArrayBuffer`][@stdlib/types/array/buffer] bytes to a new [`Buffer`][@stdlib/types/buffer/ctor] instance.
-   `>=3.0.0` and `<5.10.0`: if provided a `byteOffset`, the function copies [`ArrayBuffer`][@stdlib/types/array/buffer] bytes to a new [`Buffer`][@stdlib/types/buffer/ctor] instance; otherwise, the function returns a view of an [`ArrayBuffer`][@stdlib/types/array/buffer] without copying the underlying memory.
-   `>=6.0.0`: the function returns a view of an [`ArrayBuffer`][@stdlib/types/array/buffer] without copying the underlying memory.

</section>

<!-- /.notes -->

<!-- Package usage examples. -->

<section class="examples">

## Examples

```javascript
var ArrayBuffer = require( '@stdlib/types/array/buffer' );
var Float64Array = require( '@stdlib/types/array/float64' );
var randu = require( '@stdlib/math/base/random/randu' );
var IS_LITTLE_ENDIAN = require( '@stdlib/assert/is-little-endian' );
var fromArrayBuffer = require( '@stdlib/types/buffer/from-arraybuffer' );

var high;
var view;
var low;
var buf;
var ab;
var i;

// Allocate an ArrayBuffer:
ab = new ArrayBuffer( 64 );

// Create a Float64 view and set random values:
view = new Float64Array( ab );
for ( i = 0; i < view.length; i++ ) {
    view[ i ] = randu();
}

// Create a new buffer from the ArrayBuffer:
buf = fromArrayBuffer( ab );

// Read the high and low words for each double:
for ( i = 0; i < view.length; i++ ) {
    if ( IS_LITTLE_ENDIAN ) {
        high = buf.readUInt32LE( (8*i)+4 );
        low = buf.readUInt32LE( 8*i );
    } else {
        high = buf.readUInt32BE( 8*i );
        low = buf.readUInt32BE( (8*i)+4 );
    }
    console.log( 'Value: %d. High: %d. Low: %d.', view[ i ], high, low );
}
```

</section>

<!-- /.examples -->

<!-- Section to include cited references. If references are included, add a horizontal rule *before* the section. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="references">

</section>

<!-- /.references -->

<!-- Section for all links. Make sure to keep an empty line after the `section` element and another before the `/section` close. -->

<section class="links">

[@stdlib/types/buffer/ctor]: https://github.com/stdlib-js/stdlib

[@stdlib/types/array/buffer]: https://github.com/stdlib-js/stdlib

</section>

<!-- /.links -->
