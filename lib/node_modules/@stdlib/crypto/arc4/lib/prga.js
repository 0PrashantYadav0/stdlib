'use strict';

// MODULES //

var swap = require( './swap.js' );


// PRGA //

/**
* Returns a pseudorandom generation function (PRGA).
*
* @private
* @param {Uint8Array} S - byte array
* @returns {Function} pseudo-random generation function
*/
function prga( S ) {
	var len = S.length;
	var i = 0;
	var j = 0;

	/**
	* Returns a pseudorandom element from a permutation vector.
	*
	* #### Notes
	*
	* * Each element of `S` is swapped with another element at least once every `256` iterations.
	*
	*
	* @private
	* @returns {uinteger8} pseudorandom element
	*/
	return function prga() {
		var k;

		// Modify the permutation vector state:
		i = (i + 1) % len;
		j = (j + S[i]) % len;
		swap( S, i, j );

		// Compute the index of the element to return:
		k = (S[i] + S[j]) % len;

		return S[ k ];
	};
} // end FUNCTION prga()


// EXPORTS //

module.exports = prga;
